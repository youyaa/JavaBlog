## 缓存雪崩

缓存同一时间大面积失效，请求全部落到数据库上，造成数据库宕机。

- 事前：保证Redis的高可用，选择合适的内存淘汰策略。
- 事中：本地cache缓存+hystrix限流&降级，避免myql宕机。
- 事后：利用Redis持久化机制保存的数据尽快恢复。
- 为不同的Key设置不同的过期时间，避免同时失效。
- 集群部署时，将热点数据均匀分布到各个Redis中

## 缓存穿透

大量请求的Key不在缓存中，请求直接到了数据库。比如：故意制造不存在的key来发起大量请求。

- 做好校验：例如Id<0，数据格式不正确的时候直接返回错误。
- 缓存无效key：在Redis中缓存查询不存在的key，设置很短的过期时间。
- 布隆过滤器

## 缓存击穿

缓存击穿不同的是**缓存击穿**是指一个Key非常热点，在不停的扛着大并发，大并发集中对这一个点进行访问，当这个Key在失效的瞬间，持续的大并发就穿破缓存，直接请求数据库，就像在一个完好无损的桶上凿开了一个洞。

## 缓存预热

热点数据直接加载进缓存。

## 缓存更新

一般先更新数据库，成功后再**删除**缓存。